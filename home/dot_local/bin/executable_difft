#!/usr/bin/env bash
set -eo pipefail

_fn() {
  readonly version="0.45.0"
  readonly name="difft"
  readonly prog="$HOME/.cargo/bin/$name"
  if [ ! -x "$prog" ] || [[ "$("$prog" --version)" != *"$version"* ]]; then
    cargo install --version "$version" difftastic
  fi

  exec "$prog" "$@"
}

_fn "$@"
