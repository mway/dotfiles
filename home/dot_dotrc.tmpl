#!/usr/bin/env bash

shopt -s autocd >/dev/null 2>&1
shopt -s cdspell >/dev/null 2>&1
shopt -s globstar >/dev/null 2>&1
shopt -s nocaseglob >/dev/null 2>&1

function PATH_add() {
    for path in "$@"; do
        [ -z "$path" ] || [[ ":$PATH:" == *":$path:"* ]] || PATH="$path:$PATH"
    done

    export PATH
}

function source_if_exists() {
    # shellcheck disable=SC1090
    [ -z "$1" ] || [ ! -f "$1" ] || source "$1"
}

# Managed by chezmoi
export PATH="{{ .path.path }}"

_profiled_files="$(find "{{ .path.home }}/.profile.d" -type f | sort)"
for f in $_profiled_files; do
    # shellcheck disable=SC1090
    source "$f" || echo "[{{ .path.home }}/.dotrc] Failed to source $f" >&2
done
